!function(a,e){"use strict"
var t=null,n=null,o=null,i=null,s=function(a){var n=a.find(".post-body iframe,.post-body object,.post-body embed");n.length>0&&!(n.parent().hasClass("separator"))&&n.wrap("<div class='separator'></div>"),a.find("iframe,object,embed").length>0&&a.fitVids()},r=function(a){a.length&&(a.spoiler({triggerEvents:true,contentClass:"spoiler-content"}),a.on("jq-spoiler-hidden jq-spoiler-visible",function(){var t=a.text();a.parent().toggleClass('spoilerFull'),a.text(t==="Show"?"Hide":"Show")}))},c=function(e){var n,o;t.children().length<=1&&e.length&&(n=a("<div></div>").addClass("post-featuredImage-caption"),o=e.html(),n.html(o),t.append(n),e.remove())};e.components.post=function(){t=e.$main.find(".post-featuredImage"),n=a("article.post"),o=a(".js-social"),e.helpers.attachOnce(n,"fit-vids",s),e.helpers.attachOnce(e.$main.find(".spoiler-button"),"post-spoiler",r),e.helpers.attachOnce(e.$main.find(".firstImage-caption"),"image-caption",c),o.length>0&&e.helpers.attachOnce(o,"js-social",function(a){e.socialz.shareIMG(a),n.find(".post-mediaHide").remove()})}}($,SFR),ifSFR.on("sfr-initialLoad",SFR.components.post),function(a,e){"use strict";e.pagination={wrapper:[],inner:[],currentPage:1,init:function(){if(-1===["xs"].indexOf(a(document).getBreakpoint())&&(e.pagination.wrapper=a(".post-pager"),e.pagination.inner=e.pagination.wrapper.find("a"),!(e.pagination.wrapper.length<1))){var t=e.pagination.inner;t.length>1&&t.each(function(){e.pagination.prevNextPage(a(this))})}},prevNextPage:function(a){a.hasClass("post-pagerNext")?e.pagination.nextPage():e.pagination.prevPage()},nextPage:function(){e.pagination.updateUI(e.pagination.wrapper.find(".post-pagerNext span"),e.pagination.wrapper.find(".post-pagerNext").attr("href"))},prevPage:function(){e.pagination.updateUI(e.pagination.wrapper.find(".post-pagerPrev span"),e.pagination.wrapper.find(".post-pagerPrev").attr("href"))},updateUI:function(t,e){a.get(e,function(d){t.html(a(d).find("h1.post-title").text())})}}}($,SFR),function(a,e){"use strict";var t=function(){var t,n;t=a(".load-nextPost"),t.length&&(n=t.data("link"),a.get(n,function(o){a(".post-body").append('<p><b>Selanjutnya:</b> <a href="'+n+'">'+a(o).find("h1.post-title").text()+'</a></p>')}))};e.components.pagination=function(){t()}}($,SFR),ifSFR.on("sfr-initialLoad",SFR.components.pagination),function(a,e){"use strict";var t,n=null,o=null,i=function(a){a.length&&a.one("mouseover",v)},s=function(a){a.on("click",function(a){a.preventDefault(),c()})},r=function(a){a.on("click",function(a){a.preventDefault(),d()})},c=function(){n.find(".shortUrl").toggleClass("hidden"),e.helpers.attachOnce(n.find(".shortUrl-close"),"close-shorturl",r)},d=function(){n.find(".shortUrl").toggleClass("hidden",!0)},l=function(e){e.find(".shortUrl-url").on("touchend",function(e){a(this)[0].setSelectionRange(0,a(this)[0].value.length)})},v=function(o){t=a.Deferred(),o.length&&a.ajax({type:"GET",url:"http://urltinyfy.appspot.com/googl?unify=1",data:{"url":e.env.postTMP[0].permalink},dataType:"jsonp",success:t.resolve,error:t.reject,contentType:"application/json"}),t.promise().then(function(a){var t=a.short_url;n.find(".shortUrl-url").attr({"data-clipboard-text":t,"value":t})})},u=function(a){if(a.length&&window.Clipboard){var t=new Clipboard(a[0]);t.on("success",function(t){a.parent().toggleClass("copied",!0),e.helpers.debounce(function(){a.parent().toggleClass("copied",!1)},1600,"clipboard-success-message")})}};e.components.shorten=function(){n=n||a(".post-shortUrl"),o=o||n.find("a"),e.helpers.attachOnce(o,"open-shorturl",s),e.helpers.attachOnce(e.$main,"get-shorturl",v),a("html").hasClass("touch")?e.helpers.attachOnce(n.find(".shortUrl"),"select-shorturl",l):e.helpers.attachOnce(n.find(".shortUrl-url"),"copy-clipboard",u),e.$main.find(".post-share-dropdown-toggle").on("click",function(e){e.stopPropagation();var t=a(this);t.find(".post-share-dropdown").toggleClass("show",!0),a(document).one("click",function(){t.find(".post-share-dropdown").toggleClass("show",!1)})})}}($,SFR),ifSFR.on("sfr-initialLoad",SFR.components.shorten),function(a,e){"use strict"
var t=null,n=null,o=null,i=null,s=function(t){t.length&&a.ajax({url:"http://graph.facebook.com/"+e.env.postTMP[0].permalink,dataType:"jsonp",success:function(a){var t,o,s=a.comments||0;t=+s>=1e3?(+s / 1e3).toFixed(0)+"K":s,i.find(".fb-comments-count").text(t),o=0==s?"Berikan Tanggapanmu":"Perlihatkan "+s+" "+e.helpers.pluralizeStr("komentar",s),n.text(o)}})},r=function(a){a.preventDefault(),n.toggleClass("button-disabled button-loading",!0),t.html(t.find("#tmplComments").html()),e.social.loadFb(function(){FB.XFBML.parse(t[0],function(){n.addClass("hidden"),n.remove(),Waypoint.refreshAll()})})},c=function(d){if(d){for(var t,n,o,c=d.find(".js-share"),i=0;i<c.length;i++)
t=a(c[i]),n=t.attr("class"),o=t.attr("data-url"),-1!==n.indexOf("twitter")?e.socialz.shareTW(t,o):-1!==n.indexOf("facebook")?e.socialz.shareFB(t,o):-1!==n.indexOf("pinterest")?e.socialz.sharePT(t,o):-1!==n.indexOf("linkedin")||-1!==n.indexOf("pocket")?e.socialz.shareEX(t,o):-1!==n.indexOf("whatsapp")?e.socialz.shareWA(t):-1!==n.indexOf("line")?e.socialz.shareLN(t):-1!==n.indexOf("mail")&&e.socialz.shareML(t);}},d=function(e){e.preventDefault(),a("html, body").animate({scrollTop:t.offset().top-200}),r(e)};e.post={init:function(){t=e.$main.find("#comments"),n=e.$main.find("#comments-btn"),o=e.$main.find(".post-share"),i=e.$main.find(".post-shareTop_cmt"),n.on("click",r),i.on("click",d),e.helpers.attachOnce(o,"post-share",c),e.helpers.attachOnce(e.$main,"comments-count",s)}}}($,SFR),ifSFR.on("sfr-initialLoad",SFR.post.init),function(a,e){"use strict";e.socialz={shareTW:function(a,t){var n=a.data("permalink"),o=a.data("title");return a.attr("data-url",t.replace(/\?url=(.*)/,"?url="+encodeURIComponent(n)+"&via=kakasugara&related=kakasugara&text="+encodeURIComponent(o)))},shareFB:function(a,t){var n=a.data("permalink"),o=a.data("title"),i=e.env.postTMP[0].image,s=e.env.postTMP[0].snippet;return a.attr("data-url",t.replace(/p\[url\]=(.*)/,"p[url]="+encodeURIComponent(n)+"&p[title]="+encodeURIComponent(o)+"&p[images][0]="+encodeURIComponent(i)+"&p[summary]="+encodeURIComponent(s)+"&u="+encodeURIComponent(n)+"&t="+encodeURIComponent(o)))},sharePT:function(a,t){var n=a.data("permalink"),o=a.data("title"),i=e.env.postTMP[0].image;return a.attr("data-url",t.replace(/\?url=(.*)/,"?url="+encodeURIComponent(n)+"&media="+encodeURIComponent(i)+"&description="+encodeURIComponent(o)))},shareWA:function(a){var t=e.env.postTMP[0].permalink,n=e.env.postTMP[0].title.replace(/\&#8216;/g,"‘").replace(/\&#8217;/g,"’");return a.attr("href",a.attr("href").replace(/\?text=(.*)/,"?text="+encodeURIComponent(n+" - "+t)))},shareWT:function(a,t,n){var o=e.env.postTMP[0].title.replace(/\&#8216;/g,"‘").replace(/\&#8217;/g,"’");return a.attr("href","http://twitter.com/intent/tweet?text="+encodeURIComponent("Baca post keren @"+t+": "+o+" "+n)+"&via=kakasugara")},shareLN:function(a){var t=e.env.postTMP[0].permalink,n=e.env.postTMP[0].title.replace(/\&#8216;/g,"‘").replace(/\&#8217;/g,"’");return a.attr("href",a.attr("href").replace(/\/text\/(.*)/,"/text/?"+encodeURIComponent(n+" - "+t)))},shareML:function(a){var t=e.env.postTMP[0].permalink,n=e.env.postTMP[0].title.replace(/\&#8216;/g,"‘").replace(/\&#8217;/g,"’");return a.attr("href",a.attr("href").replace(/\?subject=(.*)/,"?subject="+n+"&body="+encodeURIComponent(t)))},shareEX:function(a,t){var n=a.data("permalink"),o=a.data("title");return a.attr("data-url",t.replace(/\url=(.*)/,"url="+encodeURIComponent(n)+"&title="+encodeURIComponent(o)))},shareIMG:function(a){var t,n,o,i=a.data("social-type"),s=e.env.postTMP[0].permalink;return"shareImage"===i&&(t=a.attr("class"),n=a.parent().text(),o=a.parents(".separator").find("img").data("src"),a.addClass("popitup"),-1!==t.indexOf("pinterest")?(a.attr({"data-width":800,"data-height":680}),a.attr("data-url","https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(s)+"&media="+encodeURIComponent(o)+"&description="+encodeURIComponent(n))):-1!==t.indexOf("twitter")&&(a.attr({"data-width":600,"data-height":500}),a.attr("data-url","http://twitter.com/intent/tweet?text="+encodeURIComponent('Lihat foto "'+n+'" disini '+s)+"&via=kakasugara&related=kakasugara"))),"twitterMention"===i&&(t=a.data("social-id"),e.socialz.shareWT(a,t,s))}}}($,SFR),function(a,e){"use strict";var t=false;e.latestPost={init:function(){a(".latest-open").on("click",function(a){e.$body.toggleClass("show-latest",!0),e.latestPost.fetch(),a.preventDefault()}),e.latestPost.closing()},closing:function(){a(".latest-close").on("click",function(a){e.$body.toggleClass("show-latest",!1),a.preventDefault()})},fetch:function(){var n=a.Deferred();t==false&&a.ajax({type:"get",url:e.env.data.homepageUrl+"feeds/posts/summary?max-results=5&alt=json-in-script",dataType:"jsonp",contentType:"application/json",success:n.resolve,error:n.reject}),n.promise().done(function(d){e.latestPost.successUI(d),e.latestPost.updateUI(),a(window).trigger('sfr-DOMChange'),t=true}).fail(function(){a(window).trigger('sfr-DOMChange'),t=true})},errorUI:function(){a(".latest-posts-body").append('<li class="s-col-xs-12"><p class="s-fs-s s-color-light s-text-uppr s-text-center">Error 502</p></li>')},successUI:function(e){for(var post,link,title,date,image,body=a(".latest-posts-body .s-row"),s=0;s<e.feed.entry.length;s++){post=e.feed.entry[s];for(var nol=0;nol<post.link.length;nol++)if("alternate"==post.link[nol].rel){link=post.link[nol].href;break};title=post.title.$t;date=post.published.$t;image=post.media$thumbnail.url;body.append('<li class="s-col-xs-12"><div class="postMini"><a class="cover-image lazy-image" href="'+link+'" data-src="'+image.replace("s72-c","s280")+'"></a><h4 class="postMini-title"><a href="'+link+'">'+title+'</a></h4><ul class="postMini-info"><li>New post</li><li><time class="timeago" datetime="'+date+'"></time></li></ul></div></li>')}},updateUI:function(){var n=a(".latest-posts-body");n.find(".cover-image").addClass("lazy-image"),e.loadModule("perfScrollbar2",function(){n.perfectScrollbar({suppressScrollX:true,wheelPropagation:true,minScrollbarLength:20,maxScrollbarLength:160,includePadding:true,wheelSpeed:0.4})})}}}($,SFR),ifSFR.on("sfr-initialLoad",SFR.latestPost.init);
